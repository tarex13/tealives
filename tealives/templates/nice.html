{% load static %}
<!DOCTYPE html>
<html>
<head>
    <!--<link rel="stylesheet" href="{% static 'style/style-Profile.css' %}">-->
</head>
<body onload="pLoad('container')">
    <div class="container" x-data="{ rightSide: false, leftSide: false }">
        {%include '__leftbar.html'%}
        <div class="main">
{% include '__searchbar.html' %}
            <div class="main-container">
                <div class="timeline">
                    <div class="timeline-right">
                        <div class="status box">
                            <div class="status-menu">
                                <a class="status-menu-item active" href="" onclick="event.preventDefault();">Mood Check</a>
                            </div>
                            <div class="status-main">
                                <img src="{{ db.display_picture.uploadedFile.url }}" class="status-img">
                                <textarea class="status-textarea" placeholder="Write a mood check.."></textarea>
                                <!--<textarea class="status-textarea" placeholder="Write something to {{ db.username }}.."></textarea>-->
                            </div>
                            <div class="status-actions">
                                <a href="#" class="status-action">
                                    <svg viewBox="-42 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M333.7 123.3c0 33.9-12.2 63.2-36.2 87.2-24 24-53.3 36.1-87.1 36.1h-.1c-33.9 0-63.2-12.1-87.1-36.1-24-24-36.2-53.3-36.2-87.2 0-33.9 12.2-63.2 36.2-87.2 24-24 53.2-36 87-36.1h.2c33.8 0 63.2 12.2 87.1 36.1 24 24 36.2 53.3 36.2 87.2zm0 0" fill="#ffbb85" />
                                        <path d="M427.2 424c0 26.7-8.5 48.3-25.3 64.3-16.5 15.7-38.4 23.7-65 23.7H90.2c-26.6 0-48.5-8-65-23.7C8.5 472.3 0 450.7 0 423.9c0-10.2.3-20.4 1-30.2a302.7 302.7 0 0112.1-64.9c3.3-10.3 7.8-20.5 13.4-30.3 5.8-10.2 12.5-19 20.1-26.3a89 89 0 0129-18.2c11.2-4.4 23.7-6.7 37-6.7 5.2 0 10.3 2.2 20 8.5l21 13.5c6.6 4.3 15.7 8.3 27 11.9a107.7 107.7 0 0033 5.3c11 0 22-1.8 33-5.3 11.2-3.6 20.3-7.6 27-12l21-13.4c9.7-6.3 14.7-8.5 20-8.5 13.3 0 25.7 2.3 37 6.7a89 89 0 0128.9 18.2c7.6 7.3 14.4 16.1 20.2 26.3 5.5 9.8 10 20 13.3 30.3a305.5 305.5 0 0112.1 64.9c.7 9.8 1 20 1 30.2zm0 0" fill="#6aa9ff" />
                                        <path d="M210.4 246.6h-.1V0c34 0 63.3 12.2 87.2 36.1 24 24 36.2 53.3 36.2 87.2 0 33.9-12.2 63.2-36.2 87.2-24 24-53.3 36.1-87.1 36.1zm0 0" fill="#f5a86c" />
                                        <path d="M427.2 424c0 26.7-8.5 48.3-25.3 64.3-16.5 15.7-38.4 23.7-65 23.7H210.2V286.5h3.3c11 0 22-1.8 33-5.3 11.2-3.6 20.3-7.6 27-12l21-13.4c9.7-6.3 14.7-8.5 20-8.5 13.3 0 25.7 2.3 37 6.7a89 89 0 0128.9 18.2c7.6 7.3 14.4 16.1 20.2 26.3 5.5 9.8 10 20 13.3 30.3a305.5 305.5 0 0112.1 64.9c.7 9.8 1 20 1 30.2zm0 0" fill="#2682ff" />
                                    </svg>
                                    Tag People
                                </a>
                                <a href="#" class="status-action">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                        <path d="M87.084 192c-.456-5.272-.688-10.6-.688-16C86.404 78.8 162.34 0 256.004 0s169.6 78.8 169.6 176c0 5.392-.232 10.728-.688 16h.688c0 96.184-169.6 320-169.6 320s-169.6-223.288-169.6-320h.68zm168.92 32c36.392 1.024 66.744-27.608 67.84-64-1.096-36.392-31.448-65.024-67.84-64-36.392-1.024-66.744 27.608-67.84 64 1.096 36.392 31.448 65.024 67.84 64z" fill="#e21b1b" />
                                    </svg>
                                    Check in
                                </a>
                                <a href="#" class="status-action">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                        <circle cx="256" cy="256" r="256" fill="#ffca28" />
                                        <g fill="#6d4c41">
                                            <path d="M399.68 208.32c-8.832 0-16-7.168-16-16 0-17.632-14.336-32-32-32s-32 14.368-32 32c0 8.832-7.168 16-16 16s-16-7.168-16-16c0-35.296 28.704-64 64-64s64 28.704 64 64c0 8.864-7.168 16-16 16zM207.68 208.32c-8.832 0-16-7.168-16-16 0-17.632-14.368-32-32-32s-32 14.368-32 32c0 8.832-7.168 16-16 16s-16-7.168-16-16c0-35.296 28.704-64 64-64s64 28.704 64 64c0 8.864-7.168 16-16 16z" />
                                        </g>
                                        <path d="M437.696 294.688c-3.04-4-7.744-6.368-12.736-6.368H86.4c-5.024 0-9.728 2.336-12.736 6.336-3.072 4.032-4.032 9.184-2.688 14.016C94.112 390.88 170.08 448.32 255.648 448.32s161.536-57.44 184.672-139.648c1.376-4.832.416-9.984-2.624-13.984z" fill="#fafafa" />
                                    </svg>
                                    Emoji
                                </a>
                                <button class="status-share">Share</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-side" :class="{ 'active': rightSide }">
            <div class="account">
                <button class="account-button">
                    <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                        <path d="M22 6l-10 7L2 6" />
                    </svg>
                </button>
                <button class="account-button">
                    <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                        <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0" />
                    </svg>
                </button>
                <span class="account-user" onclick="hideUnhideContextMenu(this)">
                    {{ db.username }}
                    <img src="{{ db.display_picture.uploadedFile.url }}" alt="" class="account-profile">
                    <span>â–¼</span>
                </span>




                <div class="context-menu hidden">

                    <div class="context-item" onclick="location.assign('/{{request.user.username}}')"><div class="line"></div><div class="context-name">Profile</div></div>
                    <div class="context-item" onclick="location.assign('{% url 'editAccount'%}')"><div class="line"></div><div class="context-name">Settings</div></div>
                    <div class="div-logout"></div>
                    <div class="context-item" onclick="location.assign('/logout')"><div class="line"></div><div class="context-name">Logout</div></div>
                    <div class="context-item context-name close" onclick="hideUnhideContextMenu(this)"><div class="line"></div>Close</div>

                </div>






            </div>
            <div class="side-wrapper stories">
                <div class="side-title">STORIES</div>
                <div class="user">
                    <img src="" alt="" class="user-img">
                    <div class="username">
                        <div class="post-date"></div>
                    </div>
                </div>
                <div class="user">
                    <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="" class="user-img">
                    <div class="username">
                        Gvozden Boskovsky
                        <div class="post-date">29 minutes ago</div>
                    </div>
                </div>
                <!--<div class="user">
                    <img src="https://images.unsplash.com/photo-1565464027194-7957a2295fb7?ixlib=rb-1.2.1&auto=format&fit=crop&w=3500&q=80" alt="" class="user-img">
                    <div class="username">
                        Hnek Fortuin
                        <div class="post-date">3 hours ago</div>
                    </div>
                </div>
                <div class="user">
                    <img src="https://images.unsplash.com/photo-1527980965255-d3b416303d12?ixlib=rb-1.2.1&auto=format&fit=crop&w=1400&q=80" alt="" class="user-img">
                    <div class="username">
                        Lubomir Dvorak
                        <div class="post-date">18 hours ago</div>
                    </div>
                </div>-->
            </div>
            <div class="side-wrapper contacts">
                <div class="side-title">CHAT</div>
            </div>
            <!--<div class="search-bar right-search">
                <input type="text" placeholder="Search" />
                <div class="search-bar-svgs">
                    <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3" />
                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                    </svg>
                    <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.34 469.34">
                        <path d="M456.84 76.17l-64-64.06c-16.13-16.13-44.18-16.17-60.37.04L45.77 301.67a10.73 10.73 0 00-2.7 4.59L.41 455.73a10.68 10.68 0 0013.19 13.2l149.33-42.7c1.73-.5 3.3-1.42 4.58-2.7l289.33-286.98c8.06-8.07 12.5-18.78 12.5-30.19s-4.44-22.12-12.5-30.2zM285.99 89.74L325.25 129l-205 205-14.7-29.44a10.67 10.67 0 00-9.55-5.9H78.92L286 89.75zM26.2 443.14l13.9-48.64 34.74 34.74-48.64 13.9zm123.14-35.18L98.3 422.54l-51.5-51.5L61.38 320H89.4l18.38 36.77a10.67 10.67 0 004.77 4.77l36.78 18.39v28.03zm21.33-17.54v-17.09c0-4.04-2.28-7.72-5.9-9.54l-29.43-14.7 205-205 39.26 39.26-208.93 207.07zm271.11-268.7l-47.03 46.61L301 74.6l46.59-47c8.06-8.07 22.1-8.07 30.16 0l64 64c4.03 4.03 6.25 9.38 6.25 15.08s-2.22 11.05-6.22 15.05z" />
                    </svg>
                    <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                        <path d="M12 5v14M5 12h14" />
                    </svg>
                </div>
            </div>-->
        </div>
        <div class="overlay" @click="rightSide = false; leftSide = false" :class="{ 'active': rightSide || leftSide }"></div>
    </div>

   {% include 'post-templates.html' %}

    {% csrf_token %}

    <style>
        @import url("https://fonts.googleapis.com/css?family=DM+Sans:400,500,700|Source+Sans+Pro:300,400,600,700&display=swap");

        * {
            outline: none;
            box-sizing: border-box;
        }

        html {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: "Source Sans Pro", sans-serif;
            background-color: #373e57;
            color: #ccc8db;
            margin: 0;
        }

        .container {
            background-color: #151728;
            display: none;
            max-width: 1600px;
            height: 100vh;
            overflow: hidden;
            margin: 0 auto;
        }

        .left-side {
            width: 260px;
            border-right: 1px solid #272a3a;
            display: flex;
            flex-direction: column;
            transition: 0.3s;
            background-color: #151728;
            overflow: auto;
            flex-shrink: 0;
        }

        @media screen and (max-width: 930px) {
            .left-side.active {
                z-index: 4;
            }

                .left-side.active > *:not(.logo) {
                    opacity: 1;
                    transition: 0.3s 0.2s;
                }

                .left-side.active .left-side-button svg:first-child {
                    opacity: 0;
                }

                .left-side.active .left-side-button svg:last-child {
                    transform: translate(-50%, -50%);
                    opacity: 1;
                }

            .left-side:not(.active) {
                width: 56px;
                overflow: hidden;
            }

                .left-side:not(.active) > *:not(.logo):not(.left-side-button) {
                    opacity: 0;
                }

                .left-side:not(.active) .logo {
                    writing-mode: vertical-lr;
                    transform: rotate(180deg);
                    transform-origin: bottom;
                    display: flex;
                    align-items: center;
                    margin-top: -10px;
                }
        }

        .right-side {
            width: 280px;
            flex-shrink: 0;
            margin-left: auto;
            overflow: auto;
            background-color: #151728;
            display: flex;
            flex-direction: column;
        }

        @media screen and (max-width: 1210px) {
            .right-side {
                position: fixed;
                right: 0;
                top: 0;
                transition: 0.3s;
                height: 100%;
                transform: translateX(280px);
                z-index: 4;
            }

                .right-side.active {
                    transform: translateX(0);
                }
        }

        .main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background-color: #181d2f;
        }

        .logo {
            font-family: "DM Sans", sans-serif;
            font-size: 15px;
            color: #fff;
            font-weight: 600;
            text-align: center;
            height: 68px;
            line-height: 68px;
            letter-spacing: 4px;
            position: sticky;
            top: 0;
            background: linear-gradient(to bottom, rgba(21, 23, 40, 1) 0%, rgba(21, 23, 40, 1) 76%, rgba(21, 23, 40, 0) 100%);
        }

        .side-title {
            font-family: "DM Sans", sans-serif;
            color: #5c5e6e;
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .side-wrapper {
            padding: 30px;
        }

        .right-side .side-wrapper {
            height: calc(50% - 30px);
            overflow: auto;
        }

        .side-menu {
            display: flex;
            flex-direction: column;
            font-size: 15px;
            white-space: nowrap;
        }

            .side-menu svg {
                margin-right: 16px;
                width: 16px;
            }

            .side-menu a {
                text-decoration: none;
                color: #9c9cab;
                display: flex;
                align-items: center;
            }

                .side-menu a:hover {
                    color: #fff;
                }

                .side-menu a:not(:last-child) {
                    margin-bottom: 20px;
                }

        .follow-me {
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            margin-top: auto;
            overflow: hidden;
            color: #9c9cab;
            padding: 0 20px;
            height: 52px;
            flex-shrink: 0;
            border-top: 1px solid #272a3a;
            position: relative;
        }

            .follow-me svg {
                width: 16px;
                height: 16px;
                margin-right: 8px;
            }

        .follow-text {
            display: flex;
            align-items: center;
            transition: 0.3s;
        }

        .follow-me:hover .follow-text {
            transform: translateY(100%);
        }

        .follow-me:hover .developer {
            top: 0;
        }

        .developer {
            position: absolute;
            color: #fff;
            left: 0;
            top: -100%;
            display: flex;
            transition: 0.3s;
            padding: 0 20px;
            align-items: center;
            background-color: #272a3a;
            width: 100%;
            height: 100%;
        }

            .developer img {
                border-radius: 50%;
                width: 26px;
                height: 26px;
                object-fit: cover;
                margin-right: 10px;
            }

        .search-bar {
            min-height: 3vw;
            max-height: 4vw;
            background-color: #151728;
            z-index: 3;
            position: relative;
        }

            .search-bar input {
                height: 100%;
                width: 100%;
                display: block;
                background-color: transparent;
                border: none;
                padding: 0 54px;
                background-image: url("data:image/svg+xml;	charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512'%3e%3cpath d='M508.9 478.7L360 330a201.6 201.6 0 0045.2-127.3C405.3 90.9 314.4 0 202.7 0S0 91 0 202.7s91 202.6 202.7 202.6c48.2 0 92.4-17 127.3-45.2L478.7 509c4.2 4.1 11 4.1 15 0l15.2-15.1c4.1-4.2 4.1-11 0-15zm-306.2-116c-88.3 0-160-71.8-160-160s71.7-160 160-160 160 71.7 160 160-71.8 160-160 160z' data-original='%23000000' class='active-path' data-old_color='%23000000' fill='%235C5D71'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-size: 16px;
                background-position: 25px 50%;
                color: #fff;
                font-family: "Source Sans Pro", sans-serif;
                font-weight: 600;
            }

                .search-bar input::placeholder {
                    color: #5c5d71;
                }

        .main-container {
            padding: 20px;
            flex-grow: 1;
            overflow: auto;
            background-color: #24273b;
        }

        .profile {
            position: relative;
            height: 40vh;
            min-height: 250px;
            max-height: 350px;
            z-index: 1;
        }

        .profile-cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
        }

        .profile:before {
            content: "";
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: -1;
            left: 0;
            top: 0;
            background-image: url("https://images.unsplash.com/photo-1508247967583-7d982ea01526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2250&q=80");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            filter: blur(50px);
            opacity: 0.7;
        }

        .profile-menu {
            position: absolute;
            bottom: 0;
            padding-left: 200px;
            background: #151728;
            width: 100%;
            display: flex;
            border-radius: 0 0 4px 4px;
        }

        .profile-menu-link {
            padding: 20px 16px;
            color: #5c5e6e;
            transition: 0.3s;
            cursor: pointer;
            z-index: 9999;
        }

            .profile-menu-link.active, .profile-menu-link:hover {
                color: #fff;
                background-color: #1b1d2e;
                border-bottom: 3px solid #1488fa;
            }

        .profile-avatar {
            position: absolute;
            align-items: center;
            display: flex;
            z-index: 1;
            bottom: 16px;
            left: 24px;
        }

        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #151728;
        }

        .profile-name {
            margin-left: 24px;
            margin-bottom: 24px;
            font-size: 22px;
            color: #fff;
            font-weight: 600;
            font-family: "DM Sans", sans-serif;
        }

        .timeline {
            display: flex;
            padding-top: 20px;
            position: relative;
            z-index: 2;
        }

        .timeline-left {
            width: 310px;
            flex-shrink: 0;
        }

        .timeline-right {
            flex-grow: 1;
            padding-left: 20px;
        }

        @media screen and (max-width: 768px) {
            .timeline {
                flex-wrap: wrap;
                flex-direction: column-reverse;
            }

            .timeline-right {
                padding-left: 0;
                margin-bottom: 20px;
            }

            .timeline-left {
                width: 100%;
            }
        }

        .box {
            background-color: #151728;
            border-radius: 4px;
        }

        .intro {
            padding: 20px;
        }

        .intro-title {
            font-family: "DM Sans", sans-serif;
            color: #5c5e6e;
            font-weight: 600;
            font-size: 18px;
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        #intro-menu {
            display: flex;
            cursor: pointer;
        }

        .intro-menu {
            background-color: #8f98a9;
            /* box-shadow: -8px 0 0 0 #8f98a9, 8px 0 0 0 #8f98a9; */
            width: 5px;
            height: 5px;
            border: 0;
            padding: 0;
            border-radius: 50%;
            margin-left: auto;
            margin-right: 5px;
        }

        .context-menu {
            display: flex;
            flex-direction: column;
            position: absolute;
        }

        .account .context-item .line {
            height: 0;
            position: absolute;
            background: aliceblue;
            width: 0;
            left: 10px;
            bottom: 0;
            border-radius: 15px;
            transition: cubic-bezier(0.71, -0.1, 0.52, 1.17) 0.2s;
        }

        .account .context-menu {
            top: 65px;
            gap: 1vh;
            right: 3%;
            border: 1px solid antiquewhite;
            padding: 10px;
            background: #151728;
            border-radius: 28px;
            cursor: pointer;
        }

        .account .context-item {
            box-shadow: #a3acbb30 0px 3px 8px;
            background: #151728;
            padding: 20px;
            border-radius: 17px;
            width: 100%;
            border: 1px solid ghostwhite;
            position: relative;
        }

            .account .context-item:hover {
                color: #151728;
            }

                .account .context-item:hover .line {
                    left: 0;
                    width: 100%;
                    height: 100%;
                }

        .box .context-menu {
            right: 20px;
            transform: translate(0, -5%);
        }


            .box .context-menu .context-item {
                background: rgb(36, 39, 59);
                box-shadow: rgb(0 0 0 / 16%) 0px 1px 4px;
                padding: 15px;
                border-radius: 10px;
                margin: 5px 0;
                min-width: 10vw;
                display: flex;
                cursor: pointer;
            }

        .context-name {
            width: 60%;
            font-size: x-large;
            z-index: 1;
            position: relative;
            font-family: monospace;
        }

        .context-more {
            width: 40%;
            text-align: right;
            font-size: x-large;
            font-family: monospace;
        }

        .info {
            font-size: 15px;
        }

        .info-item {
            display: flex;
            color: #c3c5d5;
        }

            .info-item + .info-item {
                margin-top: 14px;
            }

            .info-item a {
                margin-left: 6px;
                color: #1771d6;
                text-decoration: none;
            }

            .info-item svg {
                width: 16px;
                margin-right: 10px;
            }

        .event {
            position: relative;
            margin-top: 20px;
            padding: 10px;
        }

        .event-wrapper {
            position: relative;
        }

        .event-img {
            max-width: 100%;
            display: block;
            padding-bottom: 12px;
        }

        .event-date {
            position: absolute;
            left: 20px;
            top: 15px;
        }

        .event-month {
            background-color: #1687fa;
            padding: 7px 20px;
            font-weight: 600;
            font-family: "DM Sans", sans-serif;
            color: #fff;
            text-align: center;
            border-radius: 4px 4px 0 0;
        }

        .event-day {
            width: 100%;
            backdrop-filter: blur(4px);
            color: #fff;
            font-size: 22px;
            font-weight: 600;
            font-family: "DM Sans", sans-serif;
            background-color: rgba(0, 0, 0, 0.4);
            padding: 6px 0;
            text-align: center;
        }

        .event-title {
            color: #c3c5d5;
            margin-bottom: 5px;
            font-family: "DM Sans", sans-serif;
            font-weight: 600;
            padding: 0 14px;
        }

        .event-subtitle {
            color: #5c5e6e;
            font-family: "DM Sans", sans-serif;
            font-size: 13px;
            font-weight: 500;
            padding: 0 14px;
        }

        .pages {
            margin-top: 20px;
            padding: 20px;
        }

        .user {
            display: flex;
            align-items: center;
            cursor: pointer;
        }



            .user + .user {
                margin-top: 18px;
            }

            .user .username label {
                cursor: pointer;
            }

        .user-img {
            border-radius: 50%;
            width: 45px;
            height: 45px;
            margin-right: 15px;
            object-fit: cover;
            object-position: center;
        }

        .username {
            font-size: 15px;
            font-family: "DM Sans", sans-serif;
        }

        .status-menu {
            padding: 20px;
            display: flex;
            align-items: center;
        }

        .status-menu-item {
            text-decoration: none;
            color: #ccc8db;
            padding: 10px 14px;
            line-height: 0.7;
            font-family: "DM Sans", sans-serif;
            font-weight: 500;
            border-radius: 20px;
        }

            .status-menu-item.active, .status-menu-item:hover {
                background-color: #2e2e40;
                color: #fff;
            }

            .status-menu-item + .status-menu-item {
                margin-left: 10px;
            }

        @media screen and (max-width: 500px) {
            .status-menu {
                font-size: 14px;
            }

            .status-menu-item + .status-menu-item {
                margin-left: 0;
            }
        }

        .status-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 20px;
        }

        .status-main {
            padding: 0 20px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #272a3a;
            padding-bottom: 20px;
            flex-wrap: wrap;
        }

        .status-textarea {
            flex-grow: 1;
            background-color: transparent;
            border: none;
            resize: none;
            margin-top: 15px;
            color: #fff;
            max-width: calc(100% - 70px);
        }

            .status-textarea::placeholder {
                color: #5c5d71;
            }

        .status-actions {
            display: flex;
            padding: 10px 20px;
        }

        .status-action {
            text-decoration: none;
            color: #ccc8db;
            margin-right: 20px;
            display: flex;
            align-items: center;
        }

            .status-action svg {
                width: 16px;
                flex-shrink: 0;
                margin-right: 8px;
            }

        @media screen and (max-width: 1320px) {
            .status-action {
                width: 16px;
                overflow: hidden;
                color: transparent;
                white-space: nowrap;
            }
        }

        .status-share {
            background-color: #1b86f9;
            border: none;
            color: #fff;
            border-radius: 4px;
            padding: 10px 20px;
            margin-left: auto;
            box-shadow: 0 0 20px #1b86f9;
            cursor: pointer;
        }

        .post {
            padding-top: 20px;
            margin-top: 20px;
        }

            .post .post-main {
                border: none;
                display: flex;
            }

        .prof-pic-cont {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 20px;
        }

        .post-main {
            padding: 0 20px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #272a3a;
            padding-bottom: 20px;
            flex-wrap: wrap;
        }

        .prof-pic {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .post .intro-menu {
            margin-bottom: auto;
            margin-top: 5px;
            cursor: pointer;
        }

        .post-detail {
            width: calc(100% - 110px);
        }

        .post_detail_tab {
            display: flex;
            gap: 0.5vw;
        }

            .post_detail_tab span {
                color: #1771d6;
            }

        .post-date {
            font-size: 15px;
            color: #595c6c;
            margin-top: 4px;
        }

        .post-content {
            padding: 0 20px 20px;
        }

        .post_file_left {
            width: 100%;
            margin-top: 10px;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
        }

        .post-file_left {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
        }

        img {
            pointer-events: none;
        }

        .file-right, .file-left {
            margin-top: 10px;
            height: calc(50% - 10px);
        }

        .post-file {
            width: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
            height: 100%;
        }

        .post-files {
            display: flex;
            margin-top: 20px;
            min-height: 10vw;
            max-height: 30vw;
        }

            .post-files > .post-file {
                width: 50%;
            }

        .post-right, .post-left {
            width: 50%;
            line-height: 0;
            display: flex;
            flex-direction: column;
        }
        .post-right{
            
            margin-left: 10px;
        }
        /*
                    .post-right .post-file {
                        height: 100%;
                    }
        */
        .post-actions {
            padding: 0 20px 20px;
        }

        .post-action {
            margin-right: 20px;
            text-decoration: none;
            color: #a2a4b4;
            display: inline-flex;
            align-items: center;
            font-weight: 600;
        }

            .post-action:hover {
                color: #fff;
            }

            .post-action svg {
                width: 16px;
                margin-right: 6px;
            }

        .account-button {
            border: 0;
            background: 0;
            color: #64677a;
            padding: 0;
            cursor: pointer;
            position: relative;
        }

            .account-button svg {
                width: 20px;
            }

            .account-button:not(.right-side-button) + .account-button:before {
                position: absolute;
                right: 0px;
                top: -2px;
                background-color: #1b86f8;
                width: 8px;
                height: 8px;
                border-radius: 50%;
                content: "";
                border: 2px solid #151728;
            }

        .account-profile {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            margin: 0 10px;
        }

        .account-user {
            display: inline-flex;
            align-items: center;
            color: #64677a;
            font-weight: 600;
            cursor: pointer;
        }

            .account-user span {
                font-size: 10px;
                font-weight: normal;
            }

        .account {
            height: 60px;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: #151728;
            z-index: 3;
            flex-shrink: 0;
        }

        .stories {
            border-bottom: 1px solid #272a3a;
        }

            .stories .user-img {
                border: 2px solid #e2b96c;
            }

            .stories .post-date {
                font-family: "Source Sans Pro", sans-serif;
            }

        .user-status {
            background-color: #7fd222;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: auto;
        }

            .user-status.offline {
                background-color: #606a8d;
            }

            .user-status.idle {
                background-color: #dd1c20;
            }

        .contacts .username {
            display: flex;
            flex: 1;
            align-items: center;
        }

        .right-search svg {
            width: 16px;
            height: 16px;
        }

        .right-search {
            padding-right: 10px;
            display: flex;
            align-items: center;
            border-top: 1px solid #272a3a;
            position: sticky;
            bottom: 0;
            margin-top: auto;
        }

            .right-search input {
                padding-right: 10px;
            }

        .search-bar-svgs {
            color: #656679;
            display: flex;
        }

            .search-bar-svgs svg {
                margin-right: 16px;
            }

        .overlay {
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            background-color: rgba(36, 39, 59, 0.8);
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: 0.3s;
        }

        @media screen and (max-width: 1210px) {
            .overlay.active {
                z-index: 3;
                opacity: 1;
                visibility: visible;
                pointer-events: all;
            }
        }

        .right-side-button {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            border: 0;
            width: 52px;
            background-color: #1e2031;
            border-left: 1px solid #272a3a;
            color: #fff;
            display: none;
            cursor: pointer;
        }

            .right-side-button:before {
                content: "";
                width: 10px;
                height: 10px;
                border-radius: 50%;
                position: absolute;
                background-color: #1b86f8;
                border: 2px solid #1e2031;
                top: 13px;
                right: 12px;
            }

            .right-side-button svg {
                width: 22px;
            }

        .hidden {
            display: none;
        }

        @media screen and (max-width: 1210px) {
            .right-side-button {
                display: block;
            }
        }

        .left-side-button {
            display: none;
        }

        @media screen and (max-width: 930px) {
            .left-side-button {
                display: flex;
                flex-shrink: 0;
                align-items: center;
                justify-content: center;
                position: relative;
                cursor: pointer;
                height: 60px;
                background-color: rgba(39, 42, 58, 0.5);
                border: 0;
                padding: 0;
                line-height: 0;
                color: #fff;
                border-bottom: 1px solid #272a3a;
            }

                .left-side-button svg {
                    transition: 0.2s;
                    width: 24px;
                }

                    .left-side-button svg:last-child {
                        position: absolute;
                        left: 50%;
                        transform: translate(100%, -50%);
                        top: 50%;
                        opacity: 0;
                    }
        }

        @media screen and (max-width: 700px) {
            .profile-avatar {
                top: -25px;
                left: 50%;
                transform: translateX(-50%);
                align-items: center;
                flex-direction: column;
                justify-content: center;
            }

            .profile-img {
                height: 100px;
                width: 100px;
            }

            .profile-name {
                margin: 5px 0;
            }

            .profile-menu {
                padding-left: 0;
                width: 100%;
                overflow: auto;
                justify-content: center;
            }

            .profile-menu-link {
                padding: 16px;
                font-size: 15px;
            }
        }

        @media screen and (max-width: 480px) {
            .profile-menu-link:nth-last-child(1), .profile-menu-link:nth-last-child(2) {
                display: none;
            }
        }

        ::-webkit-scrollbar {
            width: 10px;
            border-radius: 10px;
        }
        /* Track */
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.01);
        }
        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.11);
            border-radius: 10px;
        }
            /* Handle on hover */
            ::-webkit-scrollbar-thumb:hover {
                background: rgba(255, 255, 255, 0.1);
            }








        .animated-bg {
            background-image: linear-gradient(to right,#24273b 0%,#30344a 10%,#24273b 20%,#24273b 100%);
            background-size: 200% 100%;
            animation: bgPos 1s linear infinite;
        }

            .animated-bg:not(.prof-pic-cont) {
                border-radius: 5px;
            }

        .animated-bg-text {
            border-radius: 50px;
            display: inline-block;
            margin: 0;
            height: 10px;
            width: 100%;
        }


        @media (prefers-color-scheme: light) {
            .animated-bg {
                background-image: linear-gradient(to right, #f6f7f8 0%, #edeef1 10%, #f6f7f8 20%, #f6f7f8 100%);
                background-size: 200% 100%;
                animation: bgPos 1s linear infinite;
            }
        }

        @keyframes bgPos {
            0% {
                background-position: 50% 0;
            }

            100% {
                background-position: -150% 0;
            }
        }
    </style>
    <style>
        /*<!-- Like button -->*/
        .active .heart {
            fill: red;
            stroke: red;
            animation: pump 1s cubic-bezier(0.4, 0, 1, 1) normal;
        }

        .heart {
            fill: none;
        }

        @keyframes pump {
            0% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }

            30% {
                fill: red;
                stroke: red;
                transform: scale(1.2);
            }

            70% {
                fill: red;
                stroke: red;
                transform: scale(1.5);
            }

            100% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }
        }

        @-moz-keyframes pump {
            0% {
                fill: red;
                stroke: red;
                transform: scale(0.5);
            }

            30% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }

            70% {
                fill: red;
                stroke: red;
                transform: scale(1.5);
            }

            100% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }
        }

        @-webkit-keyframes pump {
            0% {
                fill: red;
                stroke: red;
                transform: scale(0.5);
            }

            30% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }

            70% {
                fill: red;
                stroke: red;
                transform: scale(1.5);
            }

            100% {
                fill: red;
                stroke: red;
                transform: scale(1);
            }
        }

        /*<!-- 2nd Post Template -->*/
        .temp2
        .post-files .post_file_left {
            width: 100%;
            margin-top: 10px;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
        }

        .temp2 .post-files .post_file_right {
            width: 100%;
            margin-top: 10px;
            object-fit: cover;
            object-position: center;
            border-radius: 4px;
        }
        /*<!-- 4th Post Template -->*/

        .temp4 .post-files .post_file_left {
            margin-top: 0;
        }

        .temp4 .post-files .post-right {
            width: 100%;
        }

        .temp4 .post-files .file_left .file-left {
            margin-top: 10px;
            height: calc(50% - 10px);
        }
    </style>
    <!--#Loading-->
    <style>
        .notFound {
            display: none;
            position: absolute;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        /*            .loading::before {
                content: "";
                position: absolute;
                left: 0;
                bottom: 0px;
                background: #ff4b0a;
                height: 4px;
                width: 100%;
                animation: loading 5s linear 2s infinite alternate;
            }
            .loading::after {
                content: "";
                position: absolute;
                left: 0;
                top: 0px;
                background: #ff4b0a;
                height: 4px;
                width: 100%;
                animation: loading 5s linear 2s infinite alternate;
            }*/
        /*
        @keyframes loading {
            0% {
                width: 30%;
            }

            25% {
                width: 60%;
            }

            50% {
                width: 80%;
            }

            75% {
                width: 90%;
            }

            100% {
                width: 100%;
            }
        }*/
    </style>
    <style>
        .post-cont {
            position: relative;
        }

        .back svg {
            fill: #fff;
            width: 30px;
            height: 30px;
            background: #24273b;
            border-radius: 25px;
            padding: 6px;
        }

        .comments-count {
            width: 80px;
            height: 40px;
            background: #24273b;
            border-radius: 25px;
            padding: 5px;
            display: flex;
            font-size: 15px;
            align-items: center;
            margin-top: 1%;
        }

            .comments-count svg {
                fill: #fff;
                padding: 6px;
                width: 32px;
                height: 31px;
            }

        .comment-text {
            color: white;
            margin: 15px;
        }

            .comment-text .post-actions {
                display: flex;
                justify-content: end;
            }

        .comment-user {
            border: 2px solid #24273b;
            padding: 10px;
            margin: 15px;
        }

        .comm-text {
            background-color: #24273b;
            padding: 10px;
            margin: 15px;
            display: flex;
        }

        .comment-top .comment-text {
            padding: 10px;
            background-color: #24273b;
        }

        .comment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0;
            background-color: #151728;
            overflow: auto;
            transition: cubic-bezier(0.71, -0.1, 0.52, 1.17) 2s;
        }

        .comment-active {
            height: 100%;
        }

        .comment-top {
            display: flex;
            color: white;
            font-size: x-large;
            align-items: center;
            -webkit-justify-content: space-between;
            justify-content: space-between;
            max-height: 40px;
            padding: 10px;
        }

        .comment-body {
            overflow: auto;
            max-height: calc(100% - 120px);
        }

        .comment-bottom {
            width: 100%;
            height: 60px;
            position: absolute;
            bottom: 0;
        }

        .comment-input {
            width: 85%;
            border-radius: 30px;
            border: none;
            outline: none;
            background-color: #24273b;
            position: absolute;
            bottom: 20%;
            color: white;
            padding: 10px 15px;
            left: 1%;
            min-height: 25px;
            background: #24273b;
        }

        .send {
            height: 40px;
            background: #1b86f8;
            border: none;
            color: white;
            border-radius: 30px;
            position: absolute;
            right: 1%;
           
            font-size: 13px;
            width: 10%%;
            cursor: pointer;
            bottom: 20%;
            background-image: linear-gradient(to bottom right, #00C0FF, #4218B8);
        }
    </style>
    <!--<script defer src="{% static 'tealives/scripts/templates-nice.js' %}">
    </script>-->
    <script src="{% static 'general/general.js' %}"></script>
    <script>
        var prof_pic = document.querySelectorAll('.prof-pic-cont');
        var date = document.querySelectorAll('.post-date');
        var file_left = document.querySelectorAll('.post_file_left');
        var post_username = document.querySelectorAll('.post_detail_tab strong');
        var post_top_text = document.querySelectorAll('.post_detail_tab span');
        var file_right_up = document.querySelectorAll('.file_right_up');
        var file_right_down = document.querySelectorAll('.file_right_down');
        var post_content = document.querySelectorAll('.post-content');
        var post_len = 0;
        const img = document.createElement("img");
        const animated_bgs = document.querySelectorAll('.animated-bg');
        const animated_bg_texts = document.querySelectorAll('.animated-bg-text');
        const context_menu = document.querySelector(".context-menu");
        const intro_menu = document.querySelector("#intro-menu");


        var profile_menu_link = document.querySelectorAll(".profile-menu-link");
        var active = document.querySelector(".profile-menu-link.active");
        var contextMenuOpen = false;

        document.querySelectorAll(".profile-menu-link").forEach(function (menu_link) {
            menu_link.addEventListener("click", () => {
                var active = document.querySelector(".profile-menu-link.active");
                active.classList.remove("active");
                menu_link.classList.toggle("active");
            })
        })


        /**
         * This function send and receives data from db
         * url is the url for the xhttp
         * params are the parameters if any
         * method is the method which the ready data goes thru
         * passMethod is any extra method that needs to be passed along
         * */

        function openXmlRequest(url, requestMethod, params, method, passMethod, ...args) {
            const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

            requestMethod = requestMethod.toUpperCase();
            const xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    try {
                        method(JSON.parse(this.responseText), passMethod, args);
                    } catch (e) {
                        console.error(e.message);
                        //display an error
                    }

                }

            };
            xhttp.open(requestMethod, encodeURI(url + params));
            if (requestMethod == "POST") {
                //Send the proper header information along with the request
                xhttp.setRequestHeader('X-CSRFToken', csrftoken, 'Content-type', 'application/x-www-form-urlencoded');
            }
            xhttp.send()

        }


        let postTemp = document.querySelector('#post-template');
        let temp1 = document.querySelector('#temp1');
        let temp2 = document.querySelector('#temp2');
        let temp3 = document.querySelector('#temp3');
        let temp4 = document.querySelector('#temp4');


        // Use this to add a new post through the temp html file created
        function clonePost(data) {
            //var clonedPost = document.querySelector(".post").cloneNode(true);
            var postContainer = document.querySelector(".timeline-right");
            //postContainer.appendChild(clonedPost);
            // Get template from db

            console.log(data.template);
            switch (data.template) {
                case 1:
                    postContainer.appendChild(clone(postTemp));
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(clone(temp1));
                    defaultDataTemp(data);
                    outputDataTemp1(data);
                    break;
                case 2:
                    postContainer.appendChild(clone(postTemp));
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(clone(temp2));
                    defaultDataTemp(data);
                    outputDataTemp2(data);
                    break;
                case 3:
                    postContainer.appendChild(clone(postTemp));
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(clone(temp3));
                    defaultDataTemp(data);
                    outputDataTemp3(data);
                    break;
                    
                case 4:
                    postContainer.appendChild(clone(postTemp));
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(clone(temp4));
                    console.log(postContainer);
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(temp4);
                    defaultDataTemp(data);
                    outputDataTemp4(data);
                    break;
                default:
                    postContainer.appendChild(clone(postTemp));
                    postContainer.querySelectorAll('.post-files')[post_len].appendChild(clone(temp3));
                    defaultDataTemp(data);
                    outputDataTemp3(data);
            }
            
            post_len++;
        }


        // This method shows the side contacts(dm/chat)
        function cloneContact(data) {
            let contacts = document.querySelector(".side-wrapper.contacts");
            let sideContact = clone(document.querySelector("#side-contact-template"));
            contacts.appendChild(sideContact);
            var contact = document.querySelectorAll(".side-wrapper .user")[document.querySelectorAll(".side-wrapper .user").length - 1];

            var id = contact.querySelector(".room");
            var img = contact.querySelector("img");


            username = contact.querySelector("label");
            username.innerHTML = data.user[0].first_name + " " + data.user[0].last_name;
            id.value = data.room.id.room_id;
            img.src = data.user[0].dp;



        }

        //This gets the data and gives it to clonedPost which creates a post element for each post data
        // method is the method to pass the data to
        function getData(data, method, ...args) {
            var cloned;
            for (var i = 0; i < data.length; i++) {

                cloned = method(data[i], ...args);
            }
            if (data.length == 0) {
                method(false);
            }
        }

        /**
         * This function takes the post data and writes it into the html file
         **/
        function defaultDataTemp(data) {
            var prof_pic = document.querySelectorAll('.prof-pic-cont');
            var date = document.querySelectorAll('.post-date');
            var post_username = document.querySelectorAll('.post_detail_tab strong');
            var post_top_text = document.querySelectorAll('.post_detail_tab span');
            var post_content = document.querySelectorAll('.post-content');
            var post_actions = document.querySelectorAll('.post-actions');
            var textNode = document.createTextNode(data.top_text);
            var likes = document.querySelectorAll(".post-likes");
            var comments = document.querySelectorAll(".post-comments");

            prof_pic[prof_pic.length - 1].innerHTML =
                '<img src="' + data.dp + '" class="prof-pic" alt="" />';
            post_username[post_username.length - 1].innerHTML = "@" + data.username__username;

            post_top_text[post_top_text.length - 1].innerHTML = data.title;
            post_content[post_content.length - 1].insertBefore(textNode, post_content[post_content.length - 1].children[0]);
            date[date.length - 1].innerHTML = '6 hours agos';
            post_content[post_content.length - 1].id = data.p_id;
            likes[likes.length - 1].innerHTML = data.likes;
            if (data.isLiked) {
                post_actions[post_actions.length - 1].querySelectorAll('.post-action')[0].classList.add("active");
            }
            comments[comments.length - 1].innerHTML = data.comments;
            animated_bgs.forEach((bg) => bg.classList.remove('animated-bg'))
            animated_bg_texts.forEach((bg) => bg.classList.remove('animated-bg-text'))
        }



        function outputDataTemp3(data) {
            var file_left = document.querySelectorAll('.file_left_up');
            var file_right_up = document.querySelectorAll('.file_right_up');
            var file_right_down = document.querySelectorAll('.file_right_down');

            file_left[file_left.length - 1].innerHTML =
                '<img src="' + data.files[1] + '" class="post-file" alt="" />';
            file_right_up[file_right_up.length - 1].innerHTML =
                '<img src="' + data.files[2] + '" class="post-file" alt="" />';
            file_right_down[file_right_down.length - 1].innerHTML =
                '<img src="' + data.files[3] + '" class="post-file" alt="" />';

        }

        function outputDataTemp4(data) {
            var file_left_up = document.querySelectorAll('.file_left_up');
            var file_left_down = document.querySelectorAll('.file_left_down');
            var file_right_up = document.querySelectorAll('.file_right_up');
            var file_right_down = document.querySelectorAll('.file_right_down');

            file_left_up[file_left_up.length - 1].innerHTML =
                '<img src="' + data.files[1] + '" class="post-file" alt="" />';
            file_left_down[file_left_down.length - 1].innerHTML =
                    '<img src="' + data.files[2] + '" class="post-file" alt="" />';
            file_right_up[file_right_up.length - 1].innerHTML =
                '<img src="' + data.files[3] + '" class="post-file" alt="" />';
            file_right_down[file_right_down.length - 1].innerHTML =
                '<img src="' + data.files[4] + '" class="post-file" alt="" />';

        }

        function outputDataTemp2(data) {

            var file_left = document.querySelectorAll('.file_left_up');
            var file_right = document.querySelectorAll('.file_right_up');

            file_left[file_left.length - 1].innerHTML =
                '<img src="' + data.files[1] + '" class="post-file" alt="" />';
            file_right[file_right.length - 1].innerHTML =
                '<img src="' + data.files[2] + '" class="post-file" alt="" />';
        }
        function outputDataTemp1(data) {

            var file_left = document.querySelectorAll('.post_file_left');

            file_left[file_left.length - 1].innerHTML =
                '<img src="http:\/\/127.0.0.1:8000\/media\/' + data.files__uploadedFile + '" class="post-file" alt="" />';
        }


        //for (var i = 0; i < document.querySelectorAll(".post_image").length; i++) {
        //    document.querySelectorAll(".post_image")[i].innerHTML =
        //        '<img src="https://source.unsplash.com/1600x900/?nature,water" class="post-file" alt="" />';
        //}


        // Close the menu when the body is clicked
        var contextMenuOpen = true;
        document.addEventListener('click', (e) => {
            if (contextMenuOpen == true && !(context_menu.classList.contains("hidden"))) {
                const outside = !context_menu.contains(e.target) && !intro_menu.contains(e.target);
                if (outside) hideUnhideContextMenu();
            }
        })
        //// Hide the menu when the dots are cliked
        //document.querySelector("#intro-menu").addEventListener("click", () => {
        //    hideUnhideContextMenu();
        //})
        //// Close the menu when close is cliked
        //document.querySelector(".close").addEventListener("click", () => {
        //    hideUnhideContextMenu();
        //})
        // Hide and unhide the menu when the dots are cliked
        function hideUnhideContextMenu(menu) {
            menu.parentElement.parentElement.querySelector(".context-menu").classList.toggle("hidden");
        }



        // Activate all the functions needed
        function startProcesses() {
            openXmlRequest("api/v1/user/feed/posts/", "GET", "", getData, clonePost);
            openXmlRequest("api/v1/user/chat/contacts/get/", "GET", "", getData, cloneContact)
        }

        function contactsUrl(e) {
             room = e.querySelector(".room").value;
             document.location.href = location.origin + "/chat/room/" + room;     
        }

        document.addEventListener("DOMContentLoaded", function () {
            startProcesses();
        });
        //// Like Button
        //document.querySelector('.like_button').addEventListener('click', (e) => {
        //    document.querySelector('.like_button').classList.toggle("like");
        //})
        /* var httpRequestPost = new XMLHttpRequest();

        function makeRequestPost() {
            httpRequestPost.onreadystatechange = writeContent;
            'window.location.hostname'
            httpRequestPost.open("GET", "api/v1/user/feed/posts/");
            httpRequestPost.send();
        }
        function writeContent() {
            if (httpRequestPost.readyState === 4) {
                if (httpRequestPost.status == 200) {
                    response = JSON.parse(httpRequestPost.responseText)[0];
                    uname.value = response.username
                    edit.value = response.username
                    email.value = response.email
                    f_name.value = response.first_name
                    l_name.value = response.last_name
                    bio.value = response.bio
                    gend = response.gender
                    dob.value = response.dob
                    p_no.value = response.p_no
                    web.value = response.url
                    if (gend == "M")
                    gender.value = "Male"
                    else if (gend == "F")
                    gender.value = "Female"
                    else if (gend == "O")
                    gender.value = "Others"
                } else {
                    createNotification('There was a problem with the request.', 'error');
                }
            }
        }
        makeRequestPost() */


    </script>

    <script>

        function heartClicked(e) {

            var elementParent = e.target;

            while (!elementParent.classList.contains("post-action")) {
                elementParent = elementParent.parentElement;
            }

            elementParent.classList.toggle("active");

            while (!elementParent.classList.contains("box")) {
                elementParent = elementParent.parentElement;
            }
            var p_id = elementParent.querySelector(".post-content").id;


            if (openXmlRequest("api/v1/user/post/like/" + p_id, "GET", "?r=feed", addLiked, elementParent) == false) {
                //console.log("ikjlik");
            }



        }

        function commentClicked(e) {

            var elementParent = e.target;
            var commentButton = e.target;
            while (!elementParent.classList.contains("box")) {
                elementParent = elementParent.parentElement;
            }
            elementParent.parentElement.querySelector(".comment").classList.toggle("comment-active");

            var p_id = elementParent.querySelector(".post-content").id;

            // Send the comment
            elementParent.parentElement.querySelector(".comment-bottom .send").addEventListener('click', (e) => {
                comment = elementParent.parentElement.querySelector(".comment-bottom .comment-input");

                if (comment.value != "") {
                    var params = "?ct=" + encodeURI(comment.value);
                }
                openXmlRequest(location.protocol + "//" + location.host + "/api/v1/user/post/comment/" + p_id + "/", "POST", params, cloneComment, comment.value);
            });

            console.log(elementParent);

            while (!commentButton.classList.contains("post-action")) {
                commentButton = commentButton.parentElement;
                
            }

            if (commentButton.classList.contains("new")) {
                openXmlRequest("/api/v1/user/post/comment/" + p_id, "GET", "", getData, getComment, elementParent);
                e.target.classList.remove("new");
            }
        }

        function getComment(data, e) {
            console.log(e[0].parentElement);
            var commentCont = e[0].parentElement.querySelector(".comment").querySelector(".comment-body");
            commentCont.innerHTML += ctext;
            var commentText = commentCont.querySelectorAll(".comment-text .comm-text")[commentCont.querySelectorAll(".comment-text .comm-text").length - 1];
            var commentUser = commentCont.querySelectorAll(".comment-text .comment-user")[commentCont.querySelectorAll(".comment-text .comment-user").length - 1];
            commentText.innerHTML = decodeURI(data.c_comment_text);
            commentUser.innerText = "@" + data.c_sender_id__username;
        }


        function cloneComment(e) {

        }

        function cTyping(e) {
            if (e.target.value == "@") {
                console.log("hi");
            }
        }


        function addLiked(data, e) {
            if (data.status == "failed") {
                e.querySelector(".post-content").classList.toggle("active");
            }
            if (e.querySelector(".post-action").classList.contains("active")) {
                document.querySelector(".post-likes").innerHTML = parseInt(document.querySelector(".post-likes").innerHTML = document.querySelector(".post-likes").innerHTML) + 1;
            } else {
                document.querySelector(".post-likes").innerHTML = parseInt(document.querySelector(".post-likes").innerHTML = document.querySelector(".post-likes").innerHTML) - 1;
            }
        }



    </script>
 
      
</body>
</html>
